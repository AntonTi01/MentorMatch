# MentorMatch Postgres Container

## Назначение
СУБД Postgres с расширением pgvector, используемая всеми сервисами MentorMatch для хранения пользователей, тем, эмбеддингов и служебных таблиц. Контейнер основан на образе `ankane/pgvector` и поднимается с именем `mentormatch-postgres`.【F:docker-compose.yml†L125-L140】

## Конфигурация
- Переменные окружения загружаются из файла `.env`, а также прокидываются сервисами (логин, пароль, порт, имя базы).【F:docker-compose.yml†L125-L132】
- Порт БД пробрасывается наружу (`${POSTGRES_PORT:-5432}:5432`), что позволяет подключаться к базе для отладки и миграций.【F:docker-compose.yml†L133-L134】
- Том `pgdata` сохраняет данные Postgres между перезапусками, а файл `schema.sql` монтируется как инициализационный скрипт (`/docker-entrypoint-initdb.d/01_schema.sql`). Это автоматически создаёт схему при первом запуске контейнера.【F:docker-compose.yml†L135-L138】
- Определён healthcheck `pg_isready`, который используется зависимыми сервисами для ожидания готовности базы данных.【F:docker-compose.yml†L138-L141】

## Основные функции
- Предоставляет доступ ко всем таблицам приложения, включая таблицы пользователей, профилей, тем и pgvector-индексы для поиска по эмбеддингам (см. `schema.sql`).【F:schema.sql†L1-L200】
- Обслуживает запросы всех внутренних сервисов (`server`, `admin`, `matching`, `google_data`) через сетевое имя `postgres` внутри Docker сети, заданное в переменных окружения `POSTGRES_HOST`.【F:docker-compose.yml†L8-L115】
